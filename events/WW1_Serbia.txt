add_namespace = ww1_serbia
###Grand coalition crash
country_event = {
	id = ww1_serbia.1
	title = ww1_serbia.1.t
	desc = ww1_serbia.1.d
	is_triggered_only = yes
	trigger = {
		original_tag = SER
		has_country_leader = {
			name = "Nikola Pašić"
			ruling_only = yes
		}
	}
	option = {
		name = ww1_serbia.1.a
		clr_country_flag = grand_coalition
		set_country_flag = grand_coalition_collapse
		# hidden_effect = {
		# 	country_event = generic.27
		# }
		remove_ideas = {
			SER_idea_grand_coalition
			SER_idea_grand_coalition_1
		}
		hidden_effect = {
			country_event = {
				id = ww1_serbia.3
				days = 90
			}
		}
		# retire_character = SER_nikola_pasic
		SER_milovan_milovanovic = {
			promote_character = yes
		}
	}
}

###Elections of 1912
country_event = {
	id = ww1_serbia.2
	title = ww1_serbia.2.t
	desc = ww1_serbia.2.d
	is_triggered_only = yes
	trigger = {
		original_tag = SER
		date > 1912.3.1
		date < 1912.6.1
	}
	immediate = {
		remove_ideas = SER_idea_interim_government
	}
	option = {
		name = ww1_serbia.2.a
		country_event = {
			id = ww1_serbia.12
			days = 2
		}
	}
	option = {
		name = ww1_serbia.2.b
		trigger = {
			has_country_leader = {
				name = "Ljubomir Stojanović"
				ruling_only = yes
			}
		}
		country_event = {
			id = ww1_serbia.13
			days = 2
		}
	}
}

#dissidents
country_event = {
	id = ww1_serbia.3
	title = ww1_serbia.3.t
	desc = ww1_serbia.3.d
	is_triggered_only = yes
	trigger = {
		original_tag = SER
		has_country_flag = grand_coalition_collapse
		NOT = {
			has_country_flag = grand_coalition
		}
		NOT = {
			has_idea = SER_idea_government_without_majority
		}
	}
	option = {
		name = ww1_serbia.3.a
		add_ideas = SER_idea_government_without_majority
		add_political_power = -25
		hidden_effect = {
			country_event = {
				id = ww1_serbia.4
				days = 126
			}
		}
	}
}

#government crash
country_event = {
	id = ww1_serbia.4
	title = ww1_serbia.4.t
	desc = ww1_serbia.4.d
	is_triggered_only = yes
	trigger = {
		original_tag = SER
		has_idea = SER_idea_government_without_majority
	}
	option = {
		name = ww1_serbia.4.t
		remove_ideas = SER_idea_government_without_majority
		add_ideas = SER_idea_interim_government
		custom_effect_tooltip = SER_elections_1912_tt
		hidden_effect = {
			set_politics = {
				ruling_party = democratic
				last_election = 1908.4.1
				election_frequency = 48
				elections_allowed = yes
			}
			country_event = {
				id = ww1_serbia.5
				days = 2
			}
		}
	}
}

#choose caretaker
country_event = {
	id = ww1_serbia.5
	title = ww1_serbia.5.t
	desc = ww1_serbia.5.d
	is_triggered_only = yes
	trigger = {
		original_tag = SER
		has_idea = SER_idea_interim_government
	}
	option = {
		name = ww1_serbia.5.a
		add_stability = 0.04
		hidden_effect = {
			country_event = {
				id = ww1_serbia.10
				days = 10
			}
		}
		add_popularity = {
			ideology = neutrality
			popularity = 0.02
		}
	}
	option = {
		name = ww1_serbia.5.b
		add_stability = -0.04
		add_popularity = {
			ideology = democratic
			popularity = 0.02
		}
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		SER_ljubomir_stojanovic = {
			promote_character = yes
		}
	}
}

#Stojanović resigns as pm because ur not going republican
country_event = {
	id = ww1_serbia.6
	title = ww1_serbia.6.t
	desc = ww1_serbia.6.d
	is_triggered_only = yes
	trigger = {
		original_tag = SER
		has_country_leader = {
			name = "Ljubomir Stojanović"
			ruling_only = yes
		}
		has_completed_focus = SER_moderate_plan
	}
	option = {
		name = ww1_serbia.6.a
		hidden_effect = {
			promote_character = SER_ljubomir_davidovic
		}
		effect_tooltip = {
			retire_country_leader = yes
			create_country_leader = {
				name = "Ljubomir Davidović"
				ideology = social_liberalism
				traits = {
					teacher_politician
				}
				expire = "1935.1.1"
			}
		}
	}
}

###End trade war with Serbia
country_event = {
	id = ww1_serbia.7
	title = ww1_serbia.7.t
	desc = ww1_serbia.7.d
	trigger = {
		original_tag = AUH
		SER = {
			OR = {
				has_idea = SER_idea_pig_war
				has_idea = SER_idea_pig_war_1
			}
		}
	}
	mean_time_to_happen = {
		days = 180
	}
	option = {
		name = ww1_serbia.7.a
		SER = {
			remove_ideas = {
				SER_idea_pig_war
				SER_idea_pig_war_1
			}
			add_opinion_modifier = {
				target = AUH
				modifier = small_increase
			}
		}
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
		remove_ideas = AUH_idea_pig_war_debuff
	}
	option = {
		name = ww1_serbia.7.b
		add_ideas = AUH_idea_pig_war_debuff
	}
}

#Marko Trifković resigns because hates dissidents
country_event = {
	id = ww1_serbia.8
	title = ww1_serbia.8.t
	desc = ww1_serbia.8.d
	trigger = {
		has_country_leader = {
			name = "Marko Trifković"
			ruling_only = yes
		}
	}
	is_triggered_only = yes
	option = {
		name = ww1_serbia.8.a
		hidden_effect = {
			SER_nikola_pasic = {
				promote_character = {
					ideology = liberal_conservatism
				}
			}
		}
		effect_tooltip = {
			retire_country_leader = yes
			create_country_leader = {
				name = "Nikola Pašić"
				ideology = liberal_conservatism
				expire = "1935.1.1"
				traits = {
					radical_veteran
				}
			}	
		}
	}
}

#Milovan dies
country_event = {
	id = ww1_serbia.9
	title = ww1_serbia.9.t
	desc = ww1_serbia.9.d
	trigger = {
		tag = SER
		date > 1912.6.15
		has_country_leader = {
			name = "Milovan Milovanović"
			ruling_only = yes
		}
	}
	fire_only_once = yes
	option = {
		name = ww1_serbia.9.a
		effect_tooltip = {
			kill_country_leader = yes
			create_country_leader = {
				name = "Marko Trifković"
				ideology = liberal_conservatism
				traits = {
					professional_crisis_solver
				}
			}
		}
		hidden_effect = {
			retire_character = SER_milovan_milovanovic
			SER_marko_trifkovic = {
				promote_character = {
					ideology = liberal_conservatism
				}
			}
		}
	}
}

#Stojanović kicked from independent radical party
country_event = {
	id = ww1_serbia.10
	title = ww1_serbia.10.t
	desc = ww1_serbia.10.d
	is_triggered_only = yes
	trigger = {
		has_idea = SER_idea_interim_government
		has_country_leader = {
			character = SER_milovan_milovanovic
			ruling_only = yes
		}
	}
	option = {
		name = ww1_serbia.10.a
		add_political_power = 30
		custom_effect_tooltip = SER_stojanovic_kicked_tt
	}
}
#Coalition crisis, Protić and Prodanović resign
country_event = {
	id = ww1_serbia.11
	title = ww1_serbia.11.t
	desc = ww1_serbia.11.d
	is_triggered_only = yes
	trigger = {
		OR = {
			has_idea = SER_idea_grand_coalition
			has_idea = SER_idea_grand_coalition_1
		}
	}
	option = {
		name = ww1_serbia.11.a
		add_political_power = -20
		if = {
			limit = {
				has_idea = SER_idea_grand_coalition_1
			}
			swap_ideas = {
				remove_idea = SER_idea_grand_coalition_1
				add_idea = SER_idea_grand_coalition
			}
		}
		remove_ideas = SER_jasa_prodanovic_coalition
		remove_ideas = SER_stojan_protic_coalition
		hidden_effect = {
			remove_advisor_role = {
				character = SER_stojan_protic
				slot = political_advisor
			}
			remove_advisor_role = {
				character = SER_jasa_prodanovic
				slot = political_advisor
			}
			add_advisor_role = {
				character = SER_jasa_prodanovic
				advisor = {
					slot = political_advisor 
					idea_token = SER_jasa_prodanovic
					traits = {
						resolute_social_democrat 
					}		
				}
				activate = yes
			}
			add_advisor_role = {
				character = SER_stojan_protic
				advisor = {
					slot = political_advisor 
					idea_token = SER_stojan_protic
					traits = {
						hawk 
					}		
				}
				activate = yes
			}
			country_event = {
				id = ww1_serbia.1
				days = 20
			}
		}
	}
}
country_event = {
	id = ww1_serbia.12
	title = ww1_serbia.12.t
	desc = ww1_serbia.12.d
	is_triggered_only = yes
	option = {
		name = ww1_serbia.12
		promote_character = SER_milovan_milovanovic
		set_party_name = {
			ideology = democratic
			long_name = SER_democratic_party_long
			name = SER_democratic_party
		}
	}
}
country_event = {
	id = ww1_serbia.13
	title = ww1_serbia.13.t
	desc = ww1_serbia.13.d
	is_triggered_only = yes
	option = {
		name = ww1_serbia.13.a
		complete_national_focus = SER_independent_radical_victory
		set_party_name = {
			ideology = democratic
			long_name = SER_independent_radical_party_long
			name = SER_independent_radical_party
		}
	}
}