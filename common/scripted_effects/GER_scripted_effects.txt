prussian_influence_effect = {
	if = {
		limit = {
			tag = GER
		}
		FROM = {
			if = {
				limit = {
					has_idea = GER_idea_prussian_influence_1
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_1
					add_idea = GER_idea_prussian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_2
					add_idea = GER_idea_prussian_influence_3
				}
				if = {
					limit = {
						NOT = { is_in_faction_with = PREV }
					}
					PREV = {
						if = {
							limit = {
								is_in_faction = no
							}
							create_faction = GER_norddeutscher_bund
						}
						add_to_faction = PREV
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_idea = GER_idea_bavarian_influence_1
						has_idea = GER_idea_russian_influence_1
						has_idea = GER_idea_french_influence_1
						has_idea = GER_idea_british_influence_1
					}
				}
				if = {
					limit = {
						has_idea = GER_idea_russian_influence_1
					}
					RUS = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				else_if = {
					limit = {
						has_idea = GER_idea_french_influence_1
					}
					FRA = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				else_if = {
					limit = {
						has_idea = GER_idea_british_influence_1
					}
					ENG = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				hidden_effect = {
					remove_ideas = GER_idea_bavarian_influence_1
					remove_ideas = GER_idea_russian_influence_1
					remove_ideas = GER_idea_french_influence_1
					remove_ideas = GER_idea_british_influence_1
				}
				add_ideas = GER_idea_prussian_influence_1
				every_other_country = {
					limit = {
						has_subject = PREV
					}
					end_puppet = PREV
				}
				if = {
					limit = {
						is_in_faction_yes
						NOT = {
							is_in_faction_with = PREV
						}
					}
					leave_faction = yes
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_2
					add_idea = GER_idea_bavarian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_2
					add_idea = GER_idea_russian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_2
					add_idea = GER_idea_french_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_2
					add_idea = GER_idea_british_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_3
					add_idea = GER_idea_bavarian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_3
					add_idea = GER_idea_russian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_3
					add_idea = GER_idea_french_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_3
					add_idea = GER_idea_british_influence_2
				}
			}
		}
	}
	else_if = {
		limit = {
			tag = BAY
		}
		FROM = {
			if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_1
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_1
					add_idea = GER_idea_bavarian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_2
					add_idea = GER_idea_bavarian_influence_3
				}
				if = {
					limit = {
						NOT = { is_in_faction_with = PREV }
					}
					PREV = {
						if = {
							limit = {
								is_in_faction = no
							}
							create_faction = BAY_germany_communism
						}
						add_to_faction = PREV
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_idea = GER_idea_prussian_influence_1
						has_idea = GER_idea_russian_influence_1
						has_idea = GER_idea_french_influence_1
						has_idea = GER_idea_british_influence_1
					}
				}
				if = {
					limit = {
						has_idea = GER_idea_russian_influence_1
					}
					RUS = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				else_if = {
					limit = {
						has_idea = GER_idea_french_influence_1
					}
					FRA = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				else_if = {
					limit = {
						has_idea = GER_idea_british_influence_1
					}
					ENG = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				hidden_effect = {
					remove_ideas = GER_idea_prussian_influence_1
					remove_ideas = GER_idea_russian_influence_1
					remove_ideas = GER_idea_french_influence_1
					remove_ideas = GER_idea_british_influence_1
				}
				add_ideas = GER_idea_bavarian_influence_1
				every_other_country = {
					limit = {
						has_subject = PREV
					}
					end_puppet = PREV
				}
				if = {
					limit = {
						is_in_faction_yes
						NOT = {
							is_in_faction_with = PREV
						}
					}
					leave_faction = yes
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_2
					add_idea = GER_idea_prussian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_2
					add_idea = GER_idea_russian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_2
					add_idea = GER_idea_french_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_2
					add_idea = GER_idea_british_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_3
					add_idea = GER_idea_prussian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_3
					add_idea = GER_idea_russian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_3
					add_idea = GER_idea_french_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_3
					add_idea = GER_idea_british_influence_2
				}
			}
		}
	}
	else_if = {
		limit = {
			tag = RUS
		}
		FROM = {
			if = {
				limit = {
					has_idea = GER_idea_russian_influence_1
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_1
					add_idea = GER_idea_russian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_2
					add_idea = GER_idea_russian_influence_3
				}
				if = {
					limit = {
						NOT = {
							is_in_faction_with = PREV
							is_subject_of = PREV
						}
					}
					PREV = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = yes
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = yes
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = yes
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_idea = GER_idea_prussian_influence_1
						has_idea = GER_idea_bavarian_influence_1
						has_idea = GER_idea_french_influence_1
						has_idea = GER_idea_british_influence_1
					}
				}
				if = {
					limit = {
						has_idea = GER_idea_french_influence_1
					}
					FRA = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				else_if = {
					limit = {
						has_idea = GER_idea_british_influence_1
					}
					ENG = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				hidden_effect = {
					remove_ideas = GER_idea_prussian_influence_1
					remove_ideas = GER_idea_bavarian_influence_1
					remove_ideas = GER_idea_french_influence_1
					remove_ideas = GER_idea_british_influence_1
				}
				add_ideas = GER_idea_russian_influence_1
				every_other_country = {
					limit = {
						has_subject = PREV
					}
					end_puppet = PREV
				}
				if = {
					limit = {
						is_in_faction_yes
						NOT = {
							is_in_faction_with = PREV
						}
					}
					leave_faction = yes
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_2
					add_idea = GER_idea_prussian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_2
					add_idea = GER_idea_bavarian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_2
					add_idea = GER_idea_french_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_2
					add_idea = GER_idea_british_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_3
					add_idea = GER_idea_prussian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_3
					add_idea = GER_idea_bavarian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_3
					add_idea = GER_idea_french_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_3
					add_idea = GER_idea_british_influence_2
				}
			}
		}
	}
	else_if = {
		limit = {
			tag = FRA
		}
		FROM = {
			if = {
				limit = {
					has_idea = GER_idea_french_influence_1
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_1
					add_idea = GER_idea_french_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_2
					add_idea = GER_idea_french_influence_3
				}
				if = {
					limit = {
						NOT = {
							is_in_faction_with = PREV
							is_subject_of = PREV
						}
					}
					PREV = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = yes
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = yes
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = yes
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_idea = GER_idea_prussian_influence_1
						has_idea = GER_idea_bavarian_influence_1
						has_idea = GER_idea_russian_influence_1
						has_idea = GER_idea_british_influence_1
					}
				}
				if = {
					limit = {
						has_idea = GER_idea_russian_influence_1
					}
					RUS = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				else_if = {
					limit = {
						has_idea = GER_idea_british_influence_1
					}
					ENG = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				hidden_effect = {
					remove_ideas = GER_idea_prussian_influence_1
					remove_ideas = GER_idea_bavarian_influence_1
					remove_ideas = GER_idea_russian_influence_1
					remove_ideas = GER_idea_british_influence_1
				}
				add_ideas = GER_idea_french_influence_1
				every_other_country = {
					limit = {
						has_subject = PREV
					}
					end_puppet = PREV
				}
				if = {
					limit = {
						is_in_faction_yes
						NOT = {
							is_in_faction_with = PREV
						}
					}
					leave_faction = yes
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_2
					add_idea = GER_idea_prussian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_2
					add_idea = GER_idea_bavarian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_2
					add_idea = GER_idea_russian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_2
					add_idea = GER_idea_british_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_3
					add_idea = GER_idea_prussian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_3
					add_idea = GER_idea_bavarian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_3
					add_idea = GER_idea_russian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_3
					add_idea = GER_idea_british_influence_2
				}
			}
		}
	}
	else_if = {
		limit = {
			tag = ENG
		}
		FROM = {
			if = {
				limit = {
					has_idea = GER_idea_british_influence_1
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_1
					add_idea = GER_idea_british_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_british_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_british_influence_2
					add_idea = GER_idea_british_influence_3
				}
				if = {
					limit = {
						NOT = {
							is_in_faction_with = PREV
							is_subject_of = PREV
						}
					}
					PREV = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = yes
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = yes
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = yes
						}
					}
				}
			}
			else_if = {
				limit = {
					OR = {
						has_idea = GER_idea_prussian_influence_1
						has_idea = GER_idea_bavarian_influence_1
						has_idea = GER_idea_russian_influence_1
						has_idea = GER_idea_french_influence_1
					}
				}
				if = {
					limit = {
						has_idea = GER_idea_russian_influence_1
					}
					RUS = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				else_if = {
					limit = {
						has_idea = GER_idea_french_influence_1
					}
					FRA = {
						diplomatic_relation = {
							country = PREV
							relation = guarantee
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = non_aggression_pact
							active = no
						}
						diplomatic_relation = {
							country = PREV
							relation = military_access
							active = no
						}
					}
				}
				hidden_effect = {
					remove_ideas = GER_idea_prussian_influence_1
					remove_ideas = GER_idea_bavarian_influence_1
					remove_ideas = GER_idea_russian_influence_1
					remove_ideas = GER_idea_french_influence_1
				}
				add_ideas = GER_idea_british_influence_1
				every_other_country = {
					limit = {
						has_subject = PREV
					}
					end_puppet = PREV
				}
				if = {
					limit = {
						is_in_faction_yes
						NOT = {
							is_in_faction_with = PREV
						}
					}
					leave_faction = yes
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_2
					add_idea = GER_idea_prussian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_2
					add_idea = GER_idea_bavarian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_2
					add_idea = GER_idea_russian_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_2
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_2
					add_idea = GER_idea_french_influence_1
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_prussian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_prussian_influence_3
					add_idea = GER_idea_prussian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_bavarian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_bavarian_influence_3
					add_idea = GER_idea_bavarian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_russian_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_russian_influence_3
					add_idea = GER_idea_russian_influence_2
				}
			}
			else_if = {
				limit = {
					has_idea = GER_idea_french_influence_3
				}
				swap_ideas = {
					remove_idea = GER_idea_french_influence_3
					add_idea = GER_idea_french_influence_2
				}
			}
		}
	}
}
